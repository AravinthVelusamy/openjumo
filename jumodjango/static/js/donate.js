var Donate={speed:200,jumoPercent:15,initialize:function(){this.jumoDonationDiv=jQuery("#id_jumo_amount");this.donationDiv=jQuery("#id_donation_amount");this.totalDiv=jQuery("#total_display");this.jumoPercentDisplay=jQuery("#jumo_percent_display a");this.rewardsList=jQuery(".right_side .rewards li");this.errorDiv=jQuery("#errors");this.rewards=jQuery(".rewards").length;this.donationDiv.focus();this.setupMouseEvts();jQuery(".errorlist").length||this.updateJumoAmount();this.changeDonationAmount(this.getDonationAmount(),
!1,!0)},setupMouseEvts:function(){var a=this;jQuery("#submit_donation").click(function(){return a.donate(jQuery(this))});this.setupSuggestedAmounts();this.setupRewards();this.setupJumoPercent();this.setupInputEditing()},setupSuggestedAmounts:function(){var a=this;jQuery(".right_side ul.rewards_list li").click(function(){var b=jQuery(this).attr("data-val");a.changeDonationAmount(b)})},changeVal:function(){var a=jQuery(this);this_.inputToNumber(a.val(),a)},setupInputEditing:function(){var a=this,b=
function(b,e){var d=e.which;d==39||d==37||d==190||(d==38?b.attr("id")=="id_donation_amount"?(a.setDonationInputVal(a.getDonationAmount()+1),a.updateJumoAmount()):a.setJumoInputVal(a.getJumoAmount()+1):d==40?b.attr("id")=="id_donation_amount"?(a.setDonationInputVal(a.getDonationAmount()-1),a.updateJumoAmount()):a.setJumoInputVal(a.getJumoAmount()-1):(b.attr("id")=="id_donation_amount"&&a.updateJumoAmount(),a.setJumoAmount(a.getJumoAmount()),a.setDonationAmount(a.getDonationAmount())),a.updateTotal())};
this.donationDiv.keyup(function(a){return b(jQuery(this),a)});this.jumoDonationDiv.keyup(function(a){return b(jQuery(this),a)})},setupRewards:function(){var a=this;this.rewardsList.click(function(){var b=jQuery(this),c=b.attr("data-val");b.find("input").attr("checked","checked");a.rewardsList.removeClass("selected");b.addClass("selected");a.setReward(b);jQuery(".rewards .selected").attr("data-val");var e=a.getDonationAmount();c&&c>e&&a.changeDonationAmount(c,b)});jQuery(".right_side .rewards li input").click(function(){var b=
jQuery(this),c=b.parent().parent(),e=c.attr("data-val");a.rewardsList.removeClass("selected");b.addClass("selected");a.setReward(c);e&&a.changeDonationAmount(e,c)})},setupJumoPercent:function(){var a=this;this.jumoPercentDisplay.click(function(){var b=jQuery(this);a.jumoPercentDisplay.removeClass("selected");b.addClass("selected");a.jumoPercent=Number(b.attr("data-val"));a.updateJumoAmount();a.updateTotal()})},changeDonationAmount:function(a,b,c){a=this.inputToNumber(a,b);b=this.getJumoAmount();this.setDonationInputVal(a);
this.setJumoInputVal(b);c||this.updateJumoAmount();this.updateTotal()},updateTotal:function(){this.donationAmount||this.setDonationAmount(0);this.jumoAmount||this.setJumoAmount(0);this.rewards&&this.checkRewards(this.donationAmount);this.totalDiv.text("$"+this.formatCommaSeparatedMoneyVal(this.donationAmount+this.jumoAmount))},checkRewards:function(a){var b=jQuery(".rewards .selected"),c=b.attr("data-val");b&&c&&a<c&&(b.find(".amount").css({background:"#79AF2C"}),setTimeout(function(){b.find(".amount").css({background:"none"})},
500))},updateJumoAmount:function(){this.setJumoInputVal(this.getDonationAmount()*(this.jumoPercent/100))},formatMoneyVal:function(a){var a=""+Math.round(a*100)/100,b=a.substring(a.length-3,a.length-2),c=a.substring(a.length-2,a.length-1);b!="."&&c=="."&&(a+="0");return a},formatCommaSeparatedMoneyVal:function(a){var a=String(a),b=a.split(".",2),c=b[1],b=parseInt(b[0]),e="";if(isNaN(b))return"";b<0&&(e="-");for(var b=Math.abs(b),d=new String(b),b=[];d.length>3;){var f=d.substr(d.length-3);b.unshift(f);
d=d.substr(0,d.length-3)}d.length>0&&b.unshift(d);d=b.join(",");c&&(a=c.length<1?d:c.length==1?d+"."+c+"0":d+"."+c.slice(0,2));return e+a},inputToNumber:function(a){try{var b=Number(a);return isNaN(b)?!1:b}catch(c){}},setReward:function(a){jQuery("#id_reward").val(a.attr("data-id"))},getDonationAmount:function(){return this.inputToNumber(this.donationDiv.val())},setDonationAmount:function(a){a>2E4?a=2E4:a<0&&(a=0);return this.donationAmount=a},setDonationInputVal:function(a){a=this.setDonationAmount(a);
this.donationDiv.val(this.formatMoneyVal(a))},getJumoAmount:function(){return this.inputToNumber(this.jumoDonationDiv.val(),this.jumoDonationDiv)},setJumoAmount:function(a){a>2E4?a=2E4:a<0&&(a=0);return this.jumoAmount=a},setJumoInputVal:function(a){a=this.setJumoAmount(a);this.jumoDonationDiv.val(this.formatMoneyVal(a))},showError:function(a,b){this.errorDiv.text(b||"something went wrong while we were processing your payment")},donate:function(a){return a.hasClass("disabled")?!1:!0}};
